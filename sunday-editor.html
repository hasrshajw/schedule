<!DOCTYPE html>
<html lang="te">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sunday Schedule Editor</title>

<!-- FIREBASE SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<!-- PDF Generation Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<!-- FONTS AND ICONS -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Telugu:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

<style>
    :root {
        --header-bg: #292929;
        --text-light: #fff;
        --body-bg: #f8fafc;
        --menu-new-text: #4a6da7;
        --menu-new-bg: #ffffff;
        --menu-new-border: #eeeeee;
        --menu-new-hover: #f5f5f5;
        --primary-color: #012726;
        --primary-hover: #024443;
        --primary-light: #e6f6f6;
        --danger-color: #d32f2f;
        --danger-hover: #b71c1c;
        --border-color: #e5e7eb;
        --background-color: #f8fafc;
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --surface-color: #ffffff;
        --radius-md: 12px;
        --radius-lg: 16px;
        --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --warning-color: #f59e0b;
        --success-color: #2e7d32;
        --co-visit-color: #dc2626;
        --assembly-color: #059669;
        --convention-color: #7c3aed;
    }
    
    @font-face {
        font-family: "jw-icons-external";
        src: url("./jw-icons-external-d876da3.woff") format("woff");
        font-weight: normal; font-style: normal;
    }

    * {
        box-sizing: border-box;
    }

    body {
        margin: 0; 
        padding: 0;
        font-family: 'Inter', sans-serif;
        background-color: var(--body-bg);
        color: var(--text-primary);
        visibility: hidden; 
        opacity: 0;
        transition: opacity 0.3s ease-in;
    }
    body.auth-ready { visibility: visible; opacity: 1; }
    body.menu-open { overflow: hidden; }
    body.dropdown-open { overflow: hidden; }

    /* START: NEW NAVBAR STYLES */
    .site-header { 
        background-color: var(--header-bg); 
        padding: 0; 
        color: var(--text-light); 
        position: fixed; 
        top: 0; 
        left: 0; 
        width: 100%; 
        z-index: 1000;
        box-shadow: var(--shadow-md);
    }
    .top-bar { 
        display: flex; 
        justify-content: space-between; 
        align-items: center; 
        height: 60px; 
        padding: 0 16px; 
        max-width: 1200px; 
        margin: 0 auto; 
    }
    .top-bar .mobileLogo { 
        display: block; 
        width: 80px; 
        height: 60px; 
        background-image: url(https://www.jw.org/assets/ct/46605f23da/images/siteLogo-jworg-mobile.svg), none; 
        background-repeat: no-repeat; 
        background-size: contain; 
        background-position: center left; 
        flex-shrink: 0; 
    }
    .header-right-controls { 
        display: flex; 
        align-items: center; 
        gap: 16px; 
    }
    .header-icons { 
        display: flex; 
        align-items: center; 
        height: 60px; 
        cursor: pointer; 
        padding: 8px;
        border-radius: 8px;
        transition: background-color 0.2s;
    }
    .header-icons:hover {
        background-color: rgba(255,255,255,0.1);
    }
    .header-icons svg { 
        height: 24px; 
        width: 24px; 
        color: var(--text-light); 
    }
    .header-icons .close-icon { display: none; }
    body.menu-open .header-icons .hamburger-icon { display: none; }
    body.menu-open .header-icons .close-icon { display: block; }

    .menu-overlay { 
        position: fixed; 
        top: 60px; 
        left: 0; 
        width: 100%; 
        height: calc(100% - 60px); 
        background-color: rgba(0, 0, 0, 0.6); 
        z-index: 999; 
        opacity: 0; 
        visibility: hidden; 
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out; 
    }
    .menu-overlay.is-open { opacity: 1; visibility: visible; }
    .slide-menu { 
        position: fixed; 
        top: 60px; 
        right: 0; 
        height: calc(100dvh - 60px); 
        width: 320px; 
        max-width: 90%; 
        background-color: var(--menu-new-bg); 
        z-index: 1000; 
        transform: translateX(100%); 
        transition: transform 0.3s ease-in-out; 
        display: flex; 
        flex-direction: column; 
        border-left: 1px solid var(--menu-new-border);
        box-shadow: var(--shadow-lg);
    }
    .slide-menu.is-open { transform: translateX(0); }

    .menu-links { list-style: none; margin: 0; padding: 0; overflow-y: auto; flex-grow: 1; }
    .menu-links li a { 
        display: flex; 
        align-items: center; 
        color: var(--menu-new-text); 
        background-color: var(--menu-new-bg); 
        height: 56px; 
        padding: 12px 16px; 
        box-sizing: border-box; 
        text-decoration: none; 
        font-size: 1rem; 
        transition: background-color 0.2s; 
        border-bottom: 1px solid #f0f0f0; 
    }
    .menu-links li:first-child a { border-top: none; }
    .menu-links li a:hover { background-color: var(--menu-new-hover); }

    .profile-section { 
        padding: 20px 16px; 
        border-top: 1px solid var(--menu-new-border); 
        flex-shrink: 0; 
        background-color: #fafafa; 
        margin-top: auto; 
    }
    .profile-info { display: flex; align-items: center; }
    .profile-name { 
        font-weight: 600; 
        font-size: 1rem; 
        color: #333; 
        word-break: break-all; 
    }

    .iconLink-icon { 
        font-family: "jw-icons-external"; 
        font-size: 24px; 
        display: inline-block; 
        color: #757575; 
        width: 32px; 
        margin-right: 12px; 
        text-align: center; 
    }
    .home-icon::before { content: "\e661"; }
    .midweek-icon::before { content: "\e625"; }
    .sunday-icon::before { content: "\e610"; }
    .members-icon::before { content: "\e695"; }

    .btn { 
        display: inline-flex; 
        align-items: center; 
        justify-content: center; 
        gap: 8px; 
        padding: 12px 20px; 
        border-radius: var(--radius-md); 
        font-size: 1rem; 
        font-weight: 600; 
        cursor: pointer; 
        border: none; 
        text-decoration: none; 
        background-color: var(--primary-color); 
        color: white; 
        transition: all 0.2s ease; 
        box-shadow: var(--shadow-sm);
    }
    .btn:hover:not(:disabled) { 
        background-color: var(--primary-hover); 
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
    }
    .btn:active:not(:disabled) {
        transform: translateY(0);
    }
    .btn:disabled { cursor: not-allowed; opacity: 0.6; }

    /* END: NEW NAVBAR STYLES */

    /* START: ORIGINAL EDITOR STYLES */
    .hidden { display: none !important; }
    
    main { 
        padding: calc(60px + 20px) 20px 20px; 
        min-height: 100vh;
    }
    
    .editor-main { 
        max-width: 1100px; 
        margin: 0 auto; 
    }
    
    .page-controls { 
        margin-bottom: 24px; 
        display: flex; 
        justify-content: space-between; 
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
    }
    
    .master-container { 
        background: var(--surface-color); 
        padding: 24px; 
        border-radius: var(--radius-lg); 
        box-shadow: var(--shadow-md); 
    }
    
    .schedule-display-header { 
        text-align: center; 
        margin-bottom: 0; 
    }
    
    .title-block { 
        text-align: center; 
        margin-bottom: 24px;
    }
    
    .title-block h1 { 
        margin: 0 0 12px 0; 
        font-size: 1.8em; 
        font-weight: 700
